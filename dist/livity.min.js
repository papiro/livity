var livity=livity||{};livity.ajax=function(){var t={};return t.GET=function(t,e,i,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){switch(Math.floor(r.status/100)){case 4:case 5:i&&i(r);break;default:e&&e(r)}n&&n(r)}},r.open("GET",t),r.send()},t}();var livity=livity||{};livity.css=function(){return{buildStylesheet:function(t){var e=document.createElement("style");document.head.appendChild(e);var i=e.sheet;t.reverse().forEach(function(t){i.insertRule(t,0)})}}}();var livity=livity||{};livity.dom=function(){var t=livity.util,e=function(t,e){var e=e||document,n=window;if(t instanceof i)return t;if(t instanceof HTMLElement||t instanceof Document)n=t;else if("string"==typeof t){var r=t;n=r.indexOf("#")?e.querySelector(t):e.getElementById(r.slice(1))}else t&&t.length&&(n=t[0]);return new i(n,r)};e.create=function(t){if("<"===t[0]){var e=document.createElement("div");return e.innerHTML=t,1===e.childElementCount?new i(e.firstChild):e.children}return new i(document.createElement(t))};var i=function(t,e){switch(this.native=t,t){case window:this.selector="window";break;case document:this.selector="document";break;default:this.selector=e}},n=e.safe=function(t){return function(){try{return t.apply(this,arguments)}catch(t){console.trace(t)}}};return e.htmlElement=i,i.prototype={find:n(function(t){return e(t,this.native)}),at:n(function(t,e){if(!t){for(var i=0,n=this.native,r={};i<n.attributes.length;i++){var a=attributes[i];r[a.name]=a.value}return r}return void 0===e?this.native.getAttribute(t):(this.native.setAttribute(t,e),this)}),text:n(function(t){return t?(this.native.textContent=t,this):this.native.textContent}),class:n(function(t){return t?(this.native.className=t,this):this.native.className}),style:n(function(e,i){if("object"==typeof e)return t.each(e,function(t,e){this.style(t,e)}.bind(this)),this;if(i)return"number"==typeof i&&(i+="px"),this.native.style[e]=i,this;var n=window.getComputedStyle(this.native);return e?n[e]:n}),classtoggle:n(function(t){return RegExp(t).test(this.native.className)?this.native.className=this.native.className.replace(RegExp(" "+t+"|"+t+" |"+t,"g"),""):this.native.className+=" "+t,this}),offset:n(function(t){return{top:this.native.offsetTop,left:this.native.offsetLeft,right:this.native.offsetRight}}),height:n(function(){return this.native.offsetHeight}),innerHeight:n(function(){return this.native.clientHeight}),outerHeight:n(function(){return this.native.scrollHeight}),width:n(function(){return this.native.offsetWidth}),innerWidth:n(function(){return this.native.clientWidth}),outerWidth:n(function(){return this.native.scrollWidth}),show:n(function(){var t=this.native.style;return t.display="flex",t.visibility="visible",this}),hide:n(function(t){return this.native.style[t?"visibility":"display"]=t?"hidden":"none",this}),append:n(function(t){return t=t instanceof i?t.native:t,this.native.appendChild(t),this}),appendTo:n(function(t){return e(t).append(this)}),inner:n(function(t){return this.clear(),t=t instanceof i?t.native:t,"string"==typeof t?this.native.innerHTML=t:this.append(t),this}),clear:n(function(){for(var t;t=this.native.firstChild;)this.native.removeChild(t);return this}),remove:n(function(t){return t=("string"==typeof t?e(t).native:t)||this.native,t.parentNode.removeChild(t),t}),replaceWith:n(function(t){return this.native.parentNode.replaceChild(t.native||t,this.native),e(t)}),clone:n(function(t){return e(this.native.cloneNode(t))}),next:n(function(){return e(this.native.nextElementSibling)}),previous:n(function(){return e(this.native.previousElementSibling)}),isImg:n(function(){return!(!this.native||"IMG"!==this.native.nodeName)})},e}(),livity.dom.DOMContentLoaded(function(){var t=livity.util,e=livity.dom;e("[data-dropup-options]").listen("click",function(i){var n={"<div>":{position:"absolute",left:i.target.offsetLeft,top:i.target.offsetTop,width:"auto","background-color":"black",border:"0.2em solid yellow"}},r=JSON.parse(this.at("data-dropup-options").trim()),a=e.generate(n);t.each(r,function(t,i){a.append(e.create("<a href="+i+">").text(t))}),a.appendTo("body"),e(window).listen("click",function(t){a.remove()})})});var livity=livity||{};livity.event=function(){var t=livity.dom,e=livity.util,i={},n=i.listeners={};return t&&t.htmlElement&&e.extend(t.htmlElement.prototype,{listen:t.safe(function(e,i,r){function a(e){if(!s)return i.bind(t(this))(e);if(e.target!==e.currentTarget){var n=e.target;do{if(~Array.prototype.slice.call(e.currentTarget.querySelectorAll(s)).indexOf(n))return i.bind(t(n))(e,t(e.currentTarget));n=n.parentElement}while(n!==e.currentTarget)}}if(!this.native)return this;var r=r||{},o=e.split(" "),l=o.shift();if(/ on /.test(e))var s=o.pop();n[this.selector]=n[this.selector]||{},n[this.selector][e]=n[this.selector][e]||{};var c,v=i.toString();if(c=n[this.selector][e][v]){if(r.cache)return this;r.stack||(this.unlisten(l,c),delete n[this.selector][e][v])}return n[this.selector][e][v]=a,this.native.addEventListener(l,n[this.selector][e][v]),this}),unlisten:t.safe(function(t,e){this.native.removeEventListener(t,e)}),trigger:t.safe(function(t,e){var i=function(){var i;try{i=new CustomEvent(t,e)}catch(n){i=document.createEvent("CustomEvent"),i.initEvent(t,!0,!0,e)}return i};return this.native.dispatchEvent(i()),this})}),t.DOMContentLoaded=function(e){return"complete"===document.readyState?e():void t(document).listen("DOMContentLoaded",function(){e()},{stack:!0})},i}();var livity=livity||{};livity.WebUIComponents=livity.WebUIComponents||[],livity.css.buildStylesheet(["[data-livity-gallery] {    display: flex;    flex-wrap: wrap;    text-align: center;    justify-content: center;  }","[data-livity-gallery] h2 {    width: 100%;  }","[data-livity-gallery] img {    cursor: pointer;    margin: 0.7em;  }","[data-livity-gallery-overlay] img {    position: relative;    margin: auto;    width: auto;    max-width: 100%;    max-height: 100%;    box-shadow: 0 0 7em 5em hsla(100, 100%, 0%, 0.8);    transition: left 4s, right 4s;  }",".livity-overlay-right,  .livity-overlay-left {    position: fixed;    color: hsla(0, 0%, 75%, 1);    cursor: pointer;  }",".livity-overlay-right,  .livity-overlay-left {    z-index: 1;    top: 45%;    font-size: 4em;  }",".livity-overlay-right {    right: 2%;    text-shadow: -0.05em 0 0.05em white;  }",".livity-overlay-left {    left: 2%;    text-shadow: 0.05em 0 0.05em white;  }",".livity-overlay-right:hover,  .livity-overlay-left:hover {    color: hsla(81, 44%, 75%, 1);  }"]),livity.dom.DOMContentLoaded(function(){livity.dom.create("div").at("data-livity-gallery-overlay","").at("id","overlay").class("livity-overlay").append(livity.dom.create("span").at("data-x","").class("livity-overlay-x").inner("&#x2716;")).append(livity.dom.create("span").at("data-right","").class("livity-overlay-right").inner("&#xbb;")).append(livity.dom.create("span").at("data-left","").class("livity-overlay-left").inner("&#xab;")).appendTo("body")}),livity.WebUIComponents.push(function(){var t=window.livity.dom,e=function(){t("[data-livity-gallery]").listen("click on img",function(e){function i(t){var e=t.next?1:-1;if(o+=e,a[o].img){var i=this.find("img").style("left",-900);if(r(i),!a[o+e]){var l=a[o].thumb[o?"next":"previous"]();a[o?"push":"unshift"]({thumb:l,img:n(l)})}}else o-=e;o||(o=1)}function n(t){var e=new Image,i=t.transformSrc();return i&&(e.src=i),e.src&&e}function r(e){var i=t("[data-x]");i.style({top:t(e).offset().top+i.height()+"px",right:t(e).offset().left+i.width()+"px"})}t.htmlElement.prototype.transformSrc=function(){return this.isImg()&&(this.at("data-target")||this.at("src").replace("thumbs/",""))};var a=[{thumb:this.previous()},{thumb:this},{thumb:this.next()}],o=1,l=t("[data-x]");a[1].img=n(a[1].thumb),t(a[1].img).listen("load",function(){for(var t=0,e=[0,2];2>t;t++)a[e[t]].img=n(a[e[t]].thumb);r(this),l.show()}),l.hide(!0),t("[data-livity-gallery-overlay]").append(a[1].img).listen("click on [data-x]",function(t,e){e.hide().find("img").remove()},{cache:!0}).listen("click on [data-right]",function(t,e){i.call(e,{next:!0})}).listen("click on [data-left]",function(t,e){i.call(e,{prev:!0})}).show()})};return e}()),window.livity=livity||{},livity.generate=function(){var t=function(t){var e=[];return util.each(config,function(t,i){e.push(dom.create(t).style(i))}),1===e.length?e[0]:e};return t},livity.css.buildStylesheet([".livity-overlay {    display: none;    position: fixed;    top: 7%;    right: 0;    bottom: 7%;    left: 0;  }",".livity-overlay-x {    position: fixed;    z-index: 1;    color: hsla(0, 0%, 75%, 0.65);    text-shadow: 0 0 0.2em black;    cursor: pointer;    top: 12%;    right: 5%;    font-size: 60px;  }",".livity-overlay-x:hover {    color: hsla(81, 44%, 75%, 1);  }"]);var livity=livity||{};livity.router=function(){var t=livity.dom,e=livity.ajax,i=function(n){t().listen("hashchange",function(){var r=window.location.hash;e.GET(t("#"+r.slice(1)).at("src"),function(e){t(n).inner(e.response),t(document).trigger("view."+r.slice(2))}),i.initialized=!0}),window.location.hash&&!i.initialized&&t().trigger("hashchange")};return i}();var livity=livity||{};livity.util=function(){var t={each:function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i],t)},extend:function(){return Array.prototype.slice.call(arguments,1).reduce(function(e,i){return t.each(i,function(t,i){e[t]=i}),e},arguments[0])}};return t}();
//# sourceMappingURL=dist/livity.min.js.map